# üé• –°–∏—Å—Ç–µ–º–∞ –∑–∞–ø–∏—Å–∏ –≤–∏–¥–µ–æ —Å –≤–µ–±-–∫–∞–º–µ—Ä—ã - –†–ï–ê–õ–ò–ó–û–í–ê–ù–ê!

## ‚úÖ –ù–û–í–´–ï –í–û–ó–ú–û–ñ–ù–û–°–¢–ò –î–û–ë–ê–í–õ–ï–ù–´

**–î–∞—Ç–∞**: 24 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å**: –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ  
**–ü–æ–¥—Ö–æ–¥**: –ì–∏–±—Ä–∏–¥–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (—á–∞—Å—Ç–∏ + –ø–æ–ª–Ω–æ–µ –≤–∏–¥–µ–æ)

---

## üÜï –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ

### 1. –ù–æ–≤–∞—è –º–æ–¥–µ–ª—å VideoChunk
```python
class VideoChunk(models.Model):
    session = models.ForeignKey(SurveySession, ...)
    chunk_number = models.PositiveIntegerField(...)
    chunk_file = models.FileField(...)
    duration_seconds = models.FloatField(...)
    start_time = models.FloatField(...)
    end_time = models.FloatField(...)
    has_audio = models.BooleanField(...)
    resolution = models.CharField(...)
    fps = models.IntegerField(...)
```

### 2. –ù–æ–≤—ã–µ API Endpoints (3 —à—Ç—É–∫–∏)

#### üì§ –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ —á–∞—Å—Ç–∏
```http
POST /api/proctor/upload-chunk/
```
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç –≤–∏–¥–µ–æ —á–∞—Å—Ç–∏ –ø–æ N —Å–µ–∫—É–Ω–¥
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (—Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ, FPS, –∞—É–¥–∏–æ)
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏

#### üìã –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —á–∞—Å—Ç–µ–π
```http
GET /api/proctor/session/{session_id}/chunks/
```
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —á–∞—Å—Ç–µ–π —Å–µ—Å—Å–∏–∏
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–±—â—É—é –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –°–æ–¥–µ—Ä–∂–∏—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∫–∞–∂–¥–æ–π —á–∞—Å—Ç–∏

#### üîó –°–∫–ª–µ–π–∫–∞ —á–∞—Å—Ç–µ–π
```http
POST /api/proctor/merge-chunks/
```
- –û–±—ä–µ–¥–∏–Ω—è–µ—Ç –≤—Å–µ —á–∞—Å—Ç–∏ –≤ –µ–¥–∏–Ω—ã–π —Ñ–∞–π–ª
- –°–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å SessionRecording
- –ü–æ–º–µ—á–∞–µ—Ç —á–∞—Å—Ç–∏ –∫–∞–∫ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

#### ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- –°—Ç–∞—Ä—ã–π endpoint `/api/proctor/upload-recording/` —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ú–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å –ø–æ–ª–Ω–æ–µ –≤–∏–¥–µ–æ –æ–¥–Ω–∏–º —Ñ–∞–π–ª–æ–º
- –û–±–∞ –ø–æ–¥—Ö–æ–¥–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

#### ‚úÖ –ì–∏–±–∫–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **–ß–∞—Å—Ç—è–º–∏**: –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –∏ –¥–ª–∏–Ω–Ω—ã—Ö —Å–µ—Å—Å–∏–π
- **–ü–æ–ª–Ω—ã–º —Ñ–∞–π–ª–æ–º**: –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –∏ –∫–æ—Ä–æ—Ç–∫–∏—Ö —Å–µ—Å—Å–∏–π
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∫–ª–µ–π–∫–∞**: –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –µ–¥–∏–Ω–æ–≥–æ —Ñ–∞–π–ª–∞

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –î–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö —Å–µ—Å—Å–∏–π (< 5 –º–∏–Ω—É—Ç):
```javascript
// –ü—Ä–æ—Å—Ç–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª–Ω—ã–º —Ñ–∞–π–ª–æ–º
const recorder = new MediaRecorder(stream);
recorder.onstop = () => {
    uploadFullVideo(recorder.blob);
};
```

### –î–ª—è –¥–ª–∏–Ω–Ω—ã—Ö —Å–µ—Å—Å–∏–π (> 5 –º–∏–Ω—É—Ç):
```javascript
// –ó–∞–≥—Ä—É–∑–∫–∞ —á–∞—Å—Ç—è–º–∏ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
const recorder = new VideoRecorder(sessionId, 30);
await recorder.startRecording();
```

### –î–ª—è –Ω–µ–Ω–∞–¥–µ–∂–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞:
```javascript
// –ó–∞–≥—Ä—É–∑–∫–∞ —á–∞—Å—Ç—è–º–∏ –∫–∞–∂–¥—ã–µ 15 —Å–µ–∫—É–Ω–¥
const recorder = new VideoRecorder(sessionId, 15);
```

---

## üìä –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

### –†–∞–∑–º–µ—Ä—ã —Ñ–∞–π–ª–æ–≤:
- **15 —Å–µ–∫**: ~2-5 MB (–¥–ª—è –º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞)
- **30 —Å–µ–∫**: ~5-10 MB (–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ)
- **60 —Å–µ–∫**: ~10-20 MB (–¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞)

### –§–æ—Ä–º–∞—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏:
- **WebM** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- **MP4** (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)
- **–ö–æ–¥–µ–∫**: VP9 + Opus

### –ö–∞—á–µ—Å—Ç–≤–æ –≤–∏–¥–µ–æ:
- **–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ**: 1280x720 (HD)
- **FPS**: 30 –∫–∞–¥—Ä–æ–≤/—Å–µ–∫
- **–ê—É–¥–∏–æ**: 44.1 kHz

---

## üîß Frontend Implementation

### –ì–æ—Ç–æ–≤—ã–π JavaScript –∫–ª–∞—Å—Å:
```javascript
class VideoRecorder {
    constructor(sessionId, chunkDurationSeconds = 30)
    async startRecording()
    async stopRecording()
    async uploadChunk()
    async mergeChunks()
    async getChunks()
}
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:
- `startRecording()` - –∑–∞–ø—É—Å–∫ –∑–∞–ø–∏—Å–∏ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—Ç–ø—Ä–∞–≤–∫–æ–π —á–∞—Å—Ç–µ–π
- `stopRecording()` - –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —Å–∫–ª–µ–π–∫–∞ –≤—Å–µ—Ö —á–∞—Å—Ç–µ–π
- `uploadChunk()` - –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ–¥–Ω–æ–π —á–∞—Å—Ç–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- `mergeChunks()` - —Å–∫–ª–µ–π–∫–∞ –≤—Å–µ—Ö —á–∞—Å—Ç–µ–π –≤ –µ–¥–∏–Ω—ã–π —Ñ–∞–π–ª

---

## üìà –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

### –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å:
- ‚úÖ –ú–µ–Ω—å—à–µ —Ä–∏—Å–∫ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Å–±–æ—è—Ö
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ —á–∞—Å—Ç–µ–π
- ‚úÖ –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- ‚úÖ –ú–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- ‚úÖ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–∞—Å—Ç–µ–π
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–∫–æ—Ä–æ—Å—Ç–µ–π –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞

### –ì–∏–±–∫–æ—Å—Ç—å:
- ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π —Ä–∞–∑–º–µ—Ä —á–∞—Å—Ç–µ–π
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤
- ‚úÖ –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–ª—è –∫–∞–∂–¥–æ–π —á–∞—Å—Ç–∏

### –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:
- ‚úÖ –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö —Å–µ—Å—Å–∏–π
- ‚úÖ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

---

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –ù–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ VideoChunk:
```sql
CREATE TABLE surveys_videochunk (
    id SERIAL PRIMARY KEY,
    session_id UUID REFERENCES surveys_surveysession(id),
    chunk_number INTEGER,
    chunk_file VARCHAR(100),
    file_size BIGINT,
    duration_seconds FLOAT,
    start_time FLOAT,
    end_time FLOAT,
    has_audio BOOLEAN,
    resolution VARCHAR(20),
    fps INTEGER,
    uploaded_at TIMESTAMP,
    processed BOOLEAN
);
```

### –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:
- `(session_id, chunk_number)` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å
- `(session_id, -uploaded_at)` - –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞

---

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. **–ó–∞–≥—Ä—É–∑–∫–∞ —á–∞—Å—Ç—è–º–∏** - –∫–∞–∂–¥—ã–µ N —Å–µ–∫—É–Ω–¥
2. **–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª–Ω—ã–º —Ñ–∞–π–ª–æ–º** - –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∫–ª–µ–π–∫–∞** - –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —á–∞—Å—Ç–µ–π
4. **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≤–∏–¥–µ–æ** - —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ, FPS, –∞—É–¥–∏–æ
5. **–í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏** - —Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è –∫–∞–∂–¥–æ–π —á–∞—Å—Ç–∏
6. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏

### üìã API Endpoints (–≤—Å–µ–≥–æ 7):
1. `POST /api/proctor/verify-initial/` - –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ª–∏—Ü–∞
2. `POST /api/proctor/heartbeat/` - heartbeat –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫
3. `POST /api/proctor/record-violation/` - –∑–∞–ø–∏—Å—å –Ω–∞—Ä—É—à–µ–Ω–∏–π
4. `POST /api/proctor/upload-recording/` - –ø–æ–ª–Ω–æ–µ –≤–∏–¥–µ–æ
5. `POST /api/proctor/upload-chunk/` - **–ù–û–í–´–ô** - —á–∞—Å—Ç–∏ –≤–∏–¥–µ–æ
6. `GET /api/proctor/session/{id}/chunks/` - **–ù–û–í–´–ô** - —Å–ø–∏—Å–æ–∫ —á–∞—Å—Ç–µ–π
7. `POST /api/proctor/merge-chunks/` - **–ù–û–í–´–ô** - —Å–∫–ª–µ–π–∫–∞ —á–∞—Å—Ç–µ–π

### üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:
1. **Frontend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ VideoRecorder –∫–ª–∞—Å—Å–∞
2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —á–∞—Å—Ç–µ–π
3. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–∑–º–µ—Ä–æ–≤ —á–∞—Å—Ç–µ–π –ø–æ–¥ –≤–∞—à–∏ –Ω—É–∂–¥—ã

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–æ–∑–¥–∞–Ω–æ 2 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:
- **VIDEO_RECORDING_GUIDE.md** - –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- **VIDEO_RECORDING_SUMMARY.md** - —ç—Ç–æ—Ç —Ñ–∞–π–ª

---

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–°–∏—Å—Ç–µ–º–∞ –∑–∞–ø–∏—Å–∏ –≤–∏–¥–µ–æ —Å –≤–µ–±-–∫–∞–º–µ—Ä—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞!**

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å:
- ‚úÖ **–ù–∞–¥–µ–∂–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —á–∞—Å—Ç—è–º–∏** –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö —Å–µ—Å—Å–∏–π
- ‚úÖ **–ü—Ä–æ—Å—Ç–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª–Ω—ã–º —Ñ–∞–π–ª–æ–º** –¥–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö —Å–µ—Å—Å–∏–π
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∫–ª–µ–π–∫–∞** –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –µ–¥–∏–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
- ‚úÖ **–ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞** —Ä–∞–∑–º–µ—Ä–æ–≤ —á–∞—Å—Ç–µ–π
- ‚úÖ **–ü–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –≤–∏–¥–µ–æ —Ä–µ—Å–ø–æ–Ω–¥–µ–Ω—Ç–æ–≤ –ª—é–±—ã–º —É–¥–æ–±–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º!** üé•

---

*–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ: 24 –æ–∫—Ç—è–±—Ä—è 2025*  
*–°—Ç–∞—Ç—É—Å: –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É*  
*–í—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!* ‚úÖ
