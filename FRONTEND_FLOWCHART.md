# –ë–ª–æ–∫-—Å—Ö–µ–º–∞: –ó–∞–ø—É—Å–∫ –æ–ø—Ä–æ—Å–∞ (–≤—Ä–µ–º–µ–Ω–Ω–æ –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–æ–∫)

## üìä –û–±—â–∞—è —Å—Ö–µ–º–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞

```mermaid
flowchart TD
    A[–§—Ä–æ–Ω—Ç–µ–Ω–¥: POST /api/surveys/{id}/start/] --> B[Backend: –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞]
    B --> C[–ü–æ–ª—É—á–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ Survey –ø–æ ID]
    C --> D{Survey —Å—É—â–µ—Å—Ç–≤—É–µ—Ç?}
    
    D -->|–ù–µ—Ç| E[–û—à–∏–±–∫–∞ 404: Survey not found]
    D -->|–î–∞| F[–ü–æ–ª—É—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–∑ request.data]
    
    F --> G[questions_count = request.data.questions_count || survey.questions_count]
    F --> H[language = request.data.language || 'uz']
    
    G --> I[–ù–∞—á–∞–ª–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ë–î]
    H --> I
    
    I --> J[–ü–æ–∏—Å–∫ –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø–æ–ø—ã—Ç–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è]
    J --> K[–í—ã—á–∏—Å–ª–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ —Å–ª–µ–¥—É—é—â–µ–π –ø–æ–ø—ã—Ç–∫–∏]
    
    K --> L[–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Å–µ—Å—Å–∏–∏ SurveySession]
    L --> M[–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–ª—è —Å–µ—Å—Å–∏–∏]
    
    M --> N[–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Å—Å–∏–∏ –Ω–∞ 'in_progress']
    N --> O[–°–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è]
    
    O --> P[–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ë–î]
    P --> Q[–í–æ–∑–≤—Ä–∞—Ç –¥–∞–Ω–Ω—ã—Ö —Å–µ—Å—Å–∏–∏ + —Å—Ç–∞—Ç—É—Å 201]
    
    Q --> R[–§—Ä–æ–Ω—Ç–µ–Ω–¥: –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞]
    
    style A fill:#e1f5fe
    style R fill:#e1f5fe
    style E fill:#ffebee
    style Q fill:#e8f5e8
```

## üîÑ –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Å—Å–∏–∏

```mermaid
flowchart TD
    A[–°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏] --> B[–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–µ—Å—Å–∏–∏]
    
    B --> C[user = request.user]
    B --> D[survey = –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç]
    B --> E[attempt_number = last_attempt + 1]
    B --> F[language = –∏–∑ –∑–∞–ø—Ä–æ—Å–∞ –∏–ª–∏ 'uz']
    B --> G[status = 'started']
    
    C --> H[SurveySession.objects.create]
    D --> H
    E --> H
    F --> H
    G --> H
    
    H --> I[–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤]
    I --> J[questions_count = –∏–∑ –∑–∞–ø—Ä–æ—Å–∞ –∏–ª–∏ survey.questions_count]
    J --> K[session.initialize_questions]
    
    K --> L[–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –Ω–∞ 'in_progress']
    L --> M[–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏]
    
    M --> N[–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è]
    N --> O[–í–æ–∑–≤—Ä–∞—Ç —Å–µ—Å—Å–∏–∏]
    
    style A fill:#fff3e0
    style O fill:#e8f5e8
```

## üìù –°—Ö–µ–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

```mermaid
flowchart LR
    A[request.data] --> B{questions_count?}
    A --> C{language?}
    
    B -->|–ï—Å—Ç—å| D[–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ]
    B -->|–ù–µ—Ç| E[survey.questions_count]
    
    C -->|–ï—Å—Ç—å| F[–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å]
    C -->|–ù–µ—Ç| G['uz' –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é]
    
    F -->|–í–∞–ª–∏–¥–Ω–æ| H[–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ]
    F -->|–ù–µ–≤–∞–ª–∏–¥–Ω–æ| G
    
    D --> I[questions_count –¥–ª—è —Å–µ—Å—Å–∏–∏]
    E --> I
    H --> J[language –¥–ª—è —Å–µ—Å—Å–∏–∏]
    G --> J
    
    style A fill:#f3e5f5
    style I fill:#e8f5e8
    style J fill:#e8f5e8
```

## ‚ö†Ô∏è –û—Ç–∫–ª—é—á–µ–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ (–≤—Ä–µ–º–µ–Ω–Ω–æ)

```mermaid
flowchart TD
    A[–ü—Ä–æ–≤–µ—Ä–∫–∏] --> B{–û—Ç–∫–ª—é—á–µ–Ω–æ?}
    
    B -->|–î–∞| C[–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É]
    B -->|–ù–µ—Ç| D[–í—ã–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É]
    
    C --> E[–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ]
    D --> F{–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–π–¥–µ–Ω–∞?}
    
    F -->|–î–∞| E
    F -->|–ù–µ—Ç| G[–í–µ—Ä–Ω—É—Ç—å –æ—à–∏–±–∫—É]
    
    E --> H[–°–æ–∑–¥–∞—Ç—å —Å–µ—Å—Å–∏—é]
    
    style C fill:#fff3e0
    style G fill:#ffebee
    style H fill:#e8f5e8
```

## üöÄ –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞
```javascript
const startSurvey = async (surveyId, options = {}) => {
  const response = await fetch(`/api/surveys/${surveyId}/start/`, {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${token}`,
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      questions_count: options.questions_count, // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
      language: options.language || 'uz'        // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
    })
  });
  
  return response.json();
};
```

### 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞
```javascript
try {
  const session = await startSurvey(1, {
    questions_count: 10,
    language: 'ru'
  });
  
  // session —Å–æ–¥–µ—Ä–∂–∏—Ç:
  // - id: UUID —Å–µ—Å—Å–∏–∏
  // - status: 'in_progress'
  // - current_question: –ø–µ—Ä–≤—ã–π –≤–æ–ø—Ä–æ—Å
  // - progress: –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–≥—Ä–µ—Å—Å–µ
  
  console.log('–°–µ—Å—Å–∏—è —Å–æ–∑–¥–∞–Ω–∞:', session);
} catch (error) {
  console.error('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Å—Å–∏–∏:', error);
}
```

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞ API

```json
{
  "id": "uuid-—Å–µ—Å—Å–∏–∏",
  "survey": {
    "id": 1,
    "title": "–ù–∞–∑–≤–∞–Ω–∏–µ –æ–ø—Ä–æ—Å–∞",
    "description": "–û–ø–∏—Å–∞–Ω–∏–µ –æ–ø—Ä–æ—Å–∞"
  },
  "status": "in_progress",
  "attempt_number": 1,
  "started_at": "2024-01-01T12:00:00Z",
  "expires_at": "2024-01-01T12:45:00Z",
  "language": "ru",
  "progress": {
    "current": 0,
    "total": 10,
    "percentage": 0
  },
  "current_question": {
    "id": 1,
    "text": "–¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞",
    "choices": [...]
  }
}
```

## üîç –í–æ–∑–º–æ–∂–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ó–∞–ø—É—Å–∫ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
```javascript
// –ó–∞–ø—É—Å–∫ –æ–ø—Ä–æ—Å–∞ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
const session = await startSurvey(1);
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ó–∞–ø—É—Å–∫ —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
```javascript
// –ó–∞–ø—É—Å–∫ —Å 5 –≤–æ–ø—Ä–æ—Å–∞–º–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
const session = await startSurvey(1, {
  questions_count: 5,
  language: 'ru'
});
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–ø—É—Å–∫–∏ (–≤—Ä–µ–º–µ–Ω–Ω–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ)
```javascript
// –ú–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –ø–æ–¥—Ä—è–¥
const session1 = await startSurvey(1);
const session2 = await startSurvey(1); // –í—Ä–µ–º–µ–Ω–Ω–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ
const session3 = await startSurvey(1); // –í—Ä–µ–º–µ–Ω–Ω–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ
```

## üìã –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- [ ] –ó–∞–ø—É—Å–∫ –æ–ø—Ä–æ—Å–∞ –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- [ ] –ó–∞–ø—É—Å–∫ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –≤–æ–ø—Ä–æ—Å–æ–≤
- [ ] –ó–∞–ø—É—Å–∫ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —è–∑—ã–∫–∞
- [ ] –ó–∞–ø—É—Å–∫ —Å –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ (–¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å)
- [ ] –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–ø—É—Å–∫–∏ –æ–¥–Ω–æ–≥–æ –æ–ø—Ä–æ—Å–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –æ—Ç–≤–µ—Ç–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Å—Å–∏–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤

## ‚ö° –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä–æ–∫

1. **–ë—ã—Å—Ç—Ä–æ–µ –ø—Ä–æ—Ç–æ—Ç–∏–ø–∏—Ä–æ–≤–∞–Ω–∏–µ** - –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ–±—Ö–æ–¥–∏—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ edge cases** - –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å –ª—é–±—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
3. **–£–ø—Ä–æ—â–µ–Ω–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏** - —Ñ–æ–∫—É—Å –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
4. **–û—Ç–ª–∞–¥–∫–∞** - –ª–µ–≥—á–µ –Ω–∞–π—Ç–∏ –ø—Ä–æ–±–ª–µ–º—ã –≤ –ª–æ–≥–∏–∫–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

## üîÑ –ü–ª–∞–Ω –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä–æ–∫

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞:

1. **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**
2. **–í–∫–ª—é—á–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫**
3. **–í–∫–ª—é—á–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π**
4. **–î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏**
5. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å –≤–∫–ª—é—á–µ–Ω–Ω—ã–º–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏**
